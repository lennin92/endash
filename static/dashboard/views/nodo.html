<div layout-fill="column" layout-align="center center">
    <div  flex flex-xs layout="column">
        <md-card>
            <md-card-header>
                <md-card-avatar>
                    <img src="{[{ vm.nodo.fotografia }]}"/>
                </md-card-avatar>
                <md-card-header-text>
                    <span class="md-title">Angular</span>
                    <span class="md-subhead"><a href="/#/nodos/{[{vm.nodo.padre}]}" ng-if="vm.nodo.padre!=null">Ver padre</a></span>
                </md-card-header-text>
            </md-card-header>
            <angular-chart options="vm.options"></angular-chart>
            <md-card-title>
                <md-card-title-text>
                    <span class="md-headline">{[{ vm.nodo.nombre }]}</span>
                </md-card-title-text>
            </md-card-title>
            <md-card-content>
                <h5>Demandas </h5>
                <p style="font-size: 10px;" ng-repeat="d in vm.nodo.demandas"><strong>
                    {[{ vm.demanda2Text(d)}]}:</strong>
                    {[{ d.demanda }]}</p>
                <h5>Descripcion </h5>
                <p>{[{vm.nodo.descripcion}]}</p>
            </md-card-content>
        </md-card>
    </div>

    <div flex><h2 align="center">Nodos Dependientes</h2></div>
    <div flex="80" layout="row" layout-align="center center">
        <div layout-gt-sm="row">
            <md-input-container class="md-block" flex-gt-sm>
                <label>Filtro</label>
                <md-select ng-model="vm.tipoFiltro" ng-change="vm.filtrarNodos()">
                    <md-option value="0">Todos</md-option>
                    <md-option value="1">Solo principales</md-option>
                </md-select>
            </md-input-container>
            <md-input-container class="md-block" flex-gt-sm>
                <label>Buscar</label>
                <input name="postalCode" ng-model="busqueda.nombre" placeholder="Buscar...">
            </md-input-container>
        </div>
        <div flex-gt-xs="25" layout="column" ng-repeat="grupo in vm.grupos">
            <div ng-repeat="n in grupo | filter:busqueda:strict">
                <md-card ng-click="vm.cargarNodo(n)" style="cursor: pointer;">
                    <md-card-header>
                        <md-card-header-text>
                            <span class="md-title">{[{ n.nombre }]}</span>
                        </md-card-header-text>
                    </md-card-header>
                    <img ng-src="{[{ n.fotografia }]}" class="md-card-image"
                         alt="Nodo {[{ n.id }]} {[{ n.nombre }]}" style="max-height: 150px">
                    <md-card-content>
                        <h5>Demandas </h5>
                        <p style="font-size: 10px;" ng-repeat="d in nodo.demandas"><strong>{[{ vm.demanda2Text(d)
                            }]}:</strong>
                            {[{ d.demanda }]}</p>
                    </md-card-content>
                </md-card>
            </div>
        </div>
    </div>
</div>